<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="人生苦短，我用Python">
<meta property="og:type" content="website">
<meta property="og:title" content="xinhua's blog">
<meta property="og:url" content="https://xinhuahuang.github.io/index.html">
<meta property="og:site_name" content="xinhua's blog">
<meta property="og:description" content="人生苦短，我用Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="xinhua's blog">
<meta name="twitter:description" content="人生苦短，我用Python">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://xinhuahuang.github.io/"/>





  <title> xinhua's blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">xinhua's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/MyBookMark/index.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://xinhuahuang.github.io/2015/05/20/Redis命令之-zset/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xinhua huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xinhua's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/20/Redis命令之-zset/" itemprop="url">
                  Redis命令之--zset
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-05-20T16:22:18+08:00">
                2015-05-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Redis基本数据类型"><a href="#Redis基本数据类型" class="headerlink" title="Redis基本数据类型"></a>Redis基本数据类型</h2><p>Redis支持五种数据类型：</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>含义 </th>
</tr>
</thead>
<tbody>
<tr>
<td>string</td>
<td>字符串  </td>
</tr>
<tr>
<td>hash</td>
<td>哈希  </td>
</tr>
<tr>
<td>list</td>
<td>列表  </td>
</tr>
<tr>
<td>set</td>
<td>集合</td>
</tr>
<tr>
<td>zset (Sorted set)</td>
<td>有序集合</td>
</tr>
</tbody>
</table>
<h3 id="有序集合–zset"><a href="#有序集合–zset" class="headerlink" title="有序集合–zset"></a>有序集合–zset</h3><blockquote>
<p>有序集合也是string类型元素的集合，且不允许有重复的成员<br>每个元素都会关联一个deouble类型的分数，Redis就是通过这个分数来对集合进行排序的，分数可以重复</p>
</blockquote>
<p>zset常用的命令</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>用例和描述 </th>
</tr>
</thead>
<tbody>
<tr>
<td>zadd</td>
<td>zadd key-name score1 member1 score2 member2…  ——增加成员及分数</td>
</tr>
<tr>
<td>zcount</td>
<td>zcount key-name  min max ——返回分值介于min和max之间的成员数量</td>
</tr>
<tr>
<td>zrange</td>
<td>zrange key-name start stop ——获取指定索引范围的元素</td>
</tr>
<tr>
<td>zrangebyscore</td>
<td>zrangebyscore key-name min max ——获取指定score大小范围的元素</td>
</tr>
<tr>
<td>zscore</td>
<td>zscore key-name member ——返回指定成员score值</td>
</tr>
<tr>
<td>zrem</td>
<td>zzrem key-name member1 member2… ——删除指定元素</td>
</tr>
<tr>
<td>zremrangebyscore</td>
<td>zremrangebyscore key-name min max ——删除指定score范围的元素</td>
</tr>
<tr>
<td>zremrangebyrank</td>
<td>zremrangebyrank key-name start stop ——移除有序集合中start和stop之间的所有成员</td>
</tr>
<tr>
<td>zincrby</td>
<td>zincrby key-name increment member ——增加指定成员的score值</td>
</tr>
<tr>
<td>zrevrange</td>
<td>zrevrange key-name start stop ——按从大到小排序</td>
</tr>
<tr>
<td>zrevrangebyscore</td>
<td>zrevrangebyscore key-name max min ——获取有序集合min和max之间的所有成员，并按从大到小排序</td>
</tr>
<tr>
<td>zcard</td>
<td>zcard key-name ——返回有序集合包含的成员数量</td>
</tr>
<tr>
<td>zrank</td>
<td>zrank key-name member ——返回成员member在有序集合中的排名</td>
</tr>
<tr>
<td>zinterstore</td>
<td>zinterstore dest-key [key1 key2…] ——对给定的有序集合执行类似于集合的交集运算</td>
</tr>
<tr>
<td>zunionstore</td>
<td>zunionstore dest-key [key1 key2…] ——对给定的有序集合执行类似于集合的并集运算</td>
</tr>
</tbody>
</table>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://xinhuahuang.github.io/2015/05/20/Redis命令之-set/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xinhua huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xinhua's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/20/Redis命令之-set/" itemprop="url">
                  Redis命令之--set
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-05-20T14:45:06+08:00">
                2015-05-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Redis基本数据类型"><a href="#Redis基本数据类型" class="headerlink" title="Redis基本数据类型"></a>Redis基本数据类型</h2><p>Redis支持五种数据类型：</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>含义 </th>
</tr>
</thead>
<tbody>
<tr>
<td>string</td>
<td>字符串  </td>
</tr>
<tr>
<td>hash</td>
<td>哈希  </td>
</tr>
<tr>
<td>list</td>
<td>列表  </td>
</tr>
<tr>
<td>set</td>
<td>集合</td>
</tr>
<tr>
<td>zset (Sorted set)</td>
<td>有序集合</td>
</tr>
</tbody>
</table>
<h3 id="集合–set"><a href="#集合–set" class="headerlink" title="集合–set"></a>集合–set</h3><blockquote>
<p>无序集合，元素为string类型<br>元素具有唯一性，不重复<br>集合没有修改操作</p>
</blockquote>
<p>set常用的命令</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>用例和描述 </th>
</tr>
</thead>
<tbody>
<tr>
<td>sadd</td>
<td>sadd key-name item1 item2… ——创建/添加集合以及成员</td>
</tr>
<tr>
<td>scard</td>
<td>scard key-name ——查看集合内成员个数</td>
</tr>
<tr>
<td>sismember</td>
<td>sismember key-name item ——检查成员是否属于该集合</td>
</tr>
<tr>
<td>srandmember</td>
<td>srandmember key-name item [count]——随机返回集合的一个成员，count为正数时，返回的随机元素不会重复；为负数时，返回的随机元素可能会出现重复</td>
</tr>
<tr>
<td>smembers</td>
<td>smembers key-name ——获取集合内所有成员</td>
</tr>
<tr>
<td>spop</td>
<td>spop key-name ——随机删除并返回集合的一个成员</td>
</tr>
<tr>
<td>srem</td>
<td>srem key-name item ——移除集合内指定成员</td>
</tr>
<tr>
<td>smove</td>
<td>smove source-key dest-key item ——如果source-key里面有item，则将item从source-key中移除，并插入到dest-key中。移除成功返回1，否则返回0。</td>
</tr>
<tr>
<td>sinter</td>
<td>sinter key1 key2… ——求交集（属于key1且属于key2的成员集合）</td>
</tr>
<tr>
<td>sinterstore</td>
<td>sinterstore dest-key key1 key2… ——求交集并将交集保存到dest-key中</td>
</tr>
<tr>
<td>sunion</td>
<td>sunion key1 kye2… ——求并集（属于key1 和属于key2 的成员集合）</td>
</tr>
<tr>
<td>sunionstore</td>
<td>sunionstore dest-key key1 key2… ——求并集并将并集保存到dest-key中</td>
</tr>
<tr>
<td>sdiff</td>
<td>sdiff key1 key2… ——求差集（属于key1，但不属于key2的成员集合）</td>
</tr>
<tr>
<td>sdiffstore</td>
<td>sdiffstore key1 key2… ——求差集并将差集保存到dest-key中</td>
</tr>
</tbody>
</table>
<p><strong> 1. sadd: 创建/添加集合以及成员 </strong></p>
<blockquote>
<p>如果key-name不存在，则直接创建；如果key-name已存在，且要插入的值也存在时，不执行插入操作</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sadd setkey a b c d e   <span class="comment"># setkey不存在，直接创建</span></div><div class="line">(integer) <span class="number">5</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sadd setkey a f   <span class="comment"># setkey已存在且值a也存在，则a不执行插入操作</span></div><div class="line">(integer) <span class="number">1</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; smembers setkey</div><div class="line"><span class="number">1</span>) <span class="string">"c"</span></div><div class="line"><span class="number">2</span>) <span class="string">"b"</span></div><div class="line"><span class="number">3</span>) <span class="string">"d"</span></div><div class="line"><span class="number">4</span>) <span class="string">"e"</span></div><div class="line"><span class="number">5</span>) <span class="string">"f"</span></div><div class="line"><span class="number">6</span>) <span class="string">"a"</span></div></pre></td></tr></table></figure>
<p><strong> 2. scard: 查看集合内成员个数 </strong></p>
<blockquote>
<p>如果key-name集合不存在，返回0；否则返回实际成员的个数</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; smembers setkey</div><div class="line"><span class="number">1</span>) <span class="string">"c"</span></div><div class="line"><span class="number">2</span>) <span class="string">"b"</span></div><div class="line"><span class="number">3</span>) <span class="string">"d"</span></div><div class="line"><span class="number">4</span>) <span class="string">"e"</span></div><div class="line"><span class="number">5</span>) <span class="string">"f"</span></div><div class="line"><span class="number">6</span>) <span class="string">"a"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; scard setkey</div><div class="line">(integer) <span class="number">6</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; scard setkey1</div><div class="line">(integer) <span class="number">0</span></div></pre></td></tr></table></figure>
<p><strong> 3. sismember: 检查成员是否属于该集合 </strong></p>
<blockquote>
<p>如果成员在集合中，返回1； 否则返回0</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sismember setkey a</div><div class="line">(integer) <span class="number">1</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sismember setkey h</div><div class="line">(integer) <span class="number">0</span></div></pre></td></tr></table></figure>
<p><strong> 4. srandmember: 随机返回集合的一个成员，count为正数时，返回的随机元素不会重复；为负数时，返回的随机元素可能会出现重复 </strong></p>
<blockquote>
<p>count表示每次随机返回几个成员</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; srandmember setkey <span class="number">-2</span></div><div class="line"><span class="number">1</span>) <span class="string">"e"</span></div><div class="line"><span class="number">2</span>) <span class="string">"f"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; srandmember setkey <span class="number">2</span></div><div class="line"><span class="number">1</span>) <span class="string">"e"</span></div><div class="line"><span class="number">2</span>) <span class="string">"f"</span></div></pre></td></tr></table></figure>
<p><strong> 5. smembers: 获取集合内所有成员 </strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; smembers setkey</div><div class="line"><span class="number">1</span>) <span class="string">"c"</span></div><div class="line"><span class="number">2</span>) <span class="string">"b"</span></div><div class="line"><span class="number">3</span>) <span class="string">"d"</span></div><div class="line"><span class="number">4</span>) <span class="string">"e"</span></div><div class="line"><span class="number">5</span>) <span class="string">"f"</span></div><div class="line"><span class="number">6</span>) <span class="string">"a"</span></div></pre></td></tr></table></figure>
<p><strong> 6. spop: 随机删除并返回集合的一个成员 </strong></p>
<blockquote>
<p>当setkey里面的成员为空时，返回nil</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; spop setkey</div><div class="line"><span class="string">"c"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; smembers setkey</div><div class="line"><span class="number">1</span>) <span class="string">"b"</span></div><div class="line"><span class="number">2</span>) <span class="string">"d"</span></div><div class="line"><span class="number">3</span>) <span class="string">"e"</span></div><div class="line"><span class="number">4</span>) <span class="string">"f"</span></div><div class="line"><span class="number">5</span>) <span class="string">"a"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; spop setkey</div><div class="line">(nil)</div></pre></td></tr></table></figure>
<p><strong> 7. srem: 移除集合内指定成员 </strong></p>
<blockquote>
<p>移除成功返回1，否则返回0</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; smembers setkey</div><div class="line"><span class="number">1</span>) <span class="string">"a"</span></div><div class="line"><span class="number">2</span>) <span class="string">"c"</span></div><div class="line"><span class="number">3</span>) <span class="string">"b"</span></div><div class="line"><span class="number">4</span>) <span class="string">"d"</span></div><div class="line"><span class="number">5</span>) <span class="string">"e"</span></div><div class="line"><span class="number">6</span>) <span class="string">"f"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; srem setkey f  <span class="comment"># 移除成功</span></div><div class="line">(integer) <span class="number">1</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; smembers setkey</div><div class="line"><span class="number">1</span>) <span class="string">"c"</span></div><div class="line"><span class="number">2</span>) <span class="string">"b"</span></div><div class="line"><span class="number">3</span>) <span class="string">"d"</span></div><div class="line"><span class="number">4</span>) <span class="string">"e"</span></div><div class="line"><span class="number">5</span>) <span class="string">"a"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; srem setkey g  <span class="comment"># 移除失败</span></div><div class="line">(integer) <span class="number">0</span></div></pre></td></tr></table></figure>
<p><strong> 8. smove: 如果source-key里面有item，则将item从source-key中移除，并插入到dest-key中。移除成功返回1，否则返回0 </strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; smove setkey destkey a   <span class="comment"># 移除并插入成功</span></div><div class="line">(integer) <span class="number">1</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; smove setkey destkey b</div><div class="line">(integer) <span class="number">1</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; smove setkey destkey h   <span class="comment"># 移除失败</span></div><div class="line">(integer) <span class="number">0</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; smembers destkey   <span class="comment"># 显示集合中的成员</span></div><div class="line"><span class="number">1</span>) <span class="string">"b"</span></div><div class="line"><span class="number">2</span>) <span class="string">"a"</span></div></pre></td></tr></table></figure>
<p><strong> 9. sinter: 求交集（属于key1且属于key2的成员集合） </strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sadd myset1 a b c d</div><div class="line">(integer) <span class="number">4</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sadd myset2 c d e f</div><div class="line">(integer) <span class="number">4</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sinter myset1 myset2  <span class="comment"># 成员c、d是两个集合共有的</span></div><div class="line"><span class="number">1</span>) <span class="string">"d"</span></div><div class="line"><span class="number">2</span>) <span class="string">"c"</span></div></pre></td></tr></table></figure>
<p><strong> 10. sinterstore: 求交集并将交集保存到dest-key中 </strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sinterstore destkey myset1 myset2</div><div class="line">(integer) <span class="number">2</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; smembers destkey</div><div class="line"><span class="number">1</span>) <span class="string">"c"</span></div><div class="line"><span class="number">2</span>) <span class="string">"d"</span></div></pre></td></tr></table></figure>
<p><strong> 11. sunion: 求并集（属于key1 和属于key2 的成员集合）</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sunion myset1 myset2</div><div class="line"><span class="number">1</span>) <span class="string">"c"</span></div><div class="line"><span class="number">2</span>) <span class="string">"d"</span></div><div class="line"><span class="number">3</span>) <span class="string">"b"</span></div><div class="line"><span class="number">4</span>) <span class="string">"e"</span></div><div class="line"><span class="number">5</span>) <span class="string">"f"</span></div><div class="line"><span class="number">6</span>) <span class="string">"a"</span></div></pre></td></tr></table></figure>
<p><strong> 12. sunionstore: 求并集并将并集保存到dest-key中 </strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sunionstore destkey myset1 myset2</div><div class="line">(integer) <span class="number">6</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; smembers destkey</div><div class="line"><span class="number">1</span>) <span class="string">"c"</span></div><div class="line"><span class="number">2</span>) <span class="string">"d"</span></div><div class="line"><span class="number">3</span>) <span class="string">"b"</span></div><div class="line"><span class="number">4</span>) <span class="string">"e"</span></div><div class="line"><span class="number">5</span>) <span class="string">"f"</span></div><div class="line"><span class="number">6</span>) <span class="string">"a"</span></div></pre></td></tr></table></figure>
<p><strong> 13. sdiff: 求差集（属于key1，但不属于key2的成员集合） </strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sdiff myset1 myset2</div><div class="line"><span class="number">1</span>) <span class="string">"b"</span></div><div class="line"><span class="number">2</span>) <span class="string">"a"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sdiff myset2 myset1</div><div class="line"><span class="number">1</span>) <span class="string">"e"</span></div><div class="line"><span class="number">2</span>) <span class="string">"f"</span></div></pre></td></tr></table></figure>
<p><strong> 14. sdiffstore:  求差集并将差集保存到dest-key中 </strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; sdiffstore destkey myset1 myset2</div><div class="line">(integer) <span class="number">2</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; smembers destkey</div><div class="line"><span class="number">1</span>) <span class="string">"b"</span></div><div class="line"><span class="number">2</span>) <span class="string">"a"</span></div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://xinhuahuang.github.io/2015/05/20/Redis命令之-list/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xinhua huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xinhua's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/20/Redis命令之-list/" itemprop="url">
                  Redis命令之--list
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-05-20T12:26:20+08:00">
                2015-05-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Redis基本数据类型"><a href="#Redis基本数据类型" class="headerlink" title="Redis基本数据类型"></a>Redis基本数据类型</h2><p>Redis支持五种数据类型：</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>含义 </th>
</tr>
</thead>
<tbody>
<tr>
<td>string</td>
<td>字符串  </td>
</tr>
<tr>
<td>hash</td>
<td>哈希  </td>
</tr>
<tr>
<td>list</td>
<td>列表  </td>
</tr>
<tr>
<td>set</td>
<td>集合</td>
</tr>
<tr>
<td>zset (Sorted set)</td>
<td>有序集合</td>
</tr>
</tbody>
</table>
<h3 id="列表–list"><a href="#列表–list" class="headerlink" title="列表–list"></a>列表–list</h3><blockquote>
<p>list是简单的字符串列表，按照插入顺序排序<br>每个列表可以超过40亿个元素</p>
</blockquote>
<p>List常用的命令</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>用例和描述 </th>
</tr>
</thead>
<tbody>
<tr>
<td>lrange</td>
<td>lrange key-name start end ——查看列表指定范围的元素</td>
</tr>
<tr>
<td>lpush</td>
<td>lpush key-name value1 value2… ——将一个或多个值插入列表左端</td>
</tr>
<tr>
<td>rpush</td>
<td>rpush key-name value1 value2… ——将一个或多个值插入列表右端</td>
</tr>
<tr>
<td>linsert</td>
<td>linsert key-name after/befor value ——在指定的元素前或后插入新元素</td>
</tr>
<tr>
<td>lindex</td>
<td>lindex key-name index ——返回列表中指定位置的元素</td>
</tr>
<tr>
<td>lset</td>
<td>lset key-name index value ——修改指定位置的元素</td>
</tr>
<tr>
<td>lrem</td>
<td>lrem key-name count value ——移除指定个数的元素</td>
</tr>
<tr>
<td>lpop</td>
<td>lpop key-name ——移除并返回列表最左端的元素</td>
</tr>
<tr>
<td>rpop</td>
<td>rpop key-name ——移除并返回列表最右端的元素</td>
</tr>
<tr>
<td>blpop</td>
<td>blpop key-name1 key-name2… timeout ——移除并返回列表最左端的元素(阻塞)</td>
</tr>
<tr>
<td>brpop</td>
<td>brpop key-name1 key-name2… timeout ——移除并返回列表最右端的元素(阻塞)</td>
</tr>
<tr>
<td>ltrim</td>
<td>ltrim key-name start end ——保留start和end之间的元素，start和end都保留</td>
</tr>
<tr>
<td>rpoplpush</td>
<td>rpoplpush source-key dest-key ——将source-key最右端元素插入到dest-key最左端</td>
</tr>
<tr>
<td>brpoplpush</td>
<td>brpoplpush source-key dest-key timeout ——将source-key最右端元素插入到dest-key最左端(阻塞)</td>
</tr>
</tbody>
</table>
<h3 id="常用的命令使用"><a href="#常用的命令使用" class="headerlink" title="常用的命令使用"></a>常用的命令使用</h3><p><strong> 1. lrange: 查看列表指定范围的元素 </strong></p>
<blockquote>
<p>start、end为元素的下标索引<br>索引从左侧开始，第一个元素为0，最后一个元素为-1</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">-1</span>  <span class="comment"># 取list的所有元素</span></div><div class="line"><span class="number">1</span>) <span class="string">"item1"</span></div><div class="line"><span class="number">2</span>) <span class="string">"item2"</span></div><div class="line"><span class="number">3</span>) <span class="string">"item3"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">1</span>   <span class="comment"># 取list的前两个元素</span></div><div class="line"><span class="number">1</span>) <span class="string">"item1"</span></div><div class="line"><span class="number">2</span>) <span class="string">"item2"</span></div></pre></td></tr></table></figure>
<p><strong> 2. lpush: 将一个或多个值插入列表左端 </strong></p>
<blockquote>
<p>列表是从左往右依次显示的，故最先插入的数据显示在最后面</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lpush l-list <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></div><div class="line">(integer) <span class="number">5</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange l-list <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"5"</span></div><div class="line"><span class="number">2</span>) <span class="string">"4"</span></div><div class="line"><span class="number">3</span>) <span class="string">"3"</span></div><div class="line"><span class="number">4</span>) <span class="string">"2"</span></div><div class="line"><span class="number">5</span>) <span class="string">"1"</span></div></pre></td></tr></table></figure>
<p><strong> 3. rpush: 将一个或多个值插入列表右端 </strong></p>
<blockquote>
<p>列表是从左往右依次显示的，故最先插入的数据显示在最前面</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; rpush r-list <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></div><div class="line">(integer) <span class="number">5</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange r-list <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"1"</span></div><div class="line"><span class="number">2</span>) <span class="string">"2"</span></div><div class="line"><span class="number">3</span>) <span class="string">"3"</span></div><div class="line"><span class="number">4</span>) <span class="string">"4"</span></div><div class="line"><span class="number">5</span>) <span class="string">"5"</span></div></pre></td></tr></table></figure>
<p><strong> 4. linsert: 在指定的元素前或后插入新元素 </strong></p>
<blockquote>
<p>befor，在元素前插入<br>after，在元素后插入</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"item1"</span></div><div class="line"><span class="number">2</span>) <span class="string">"item2"</span></div><div class="line"><span class="number">3</span>) <span class="string">"item3"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; linsert list before item1 item0  <span class="comment"># 在item1元素前插入item0元素</span></div><div class="line">(integer) <span class="number">4</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"item0"</span></div><div class="line"><span class="number">2</span>) <span class="string">"item1"</span></div><div class="line"><span class="number">3</span>) <span class="string">"item2"</span></div><div class="line"><span class="number">4</span>) <span class="string">"item3"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; linsert list after item3 item4  <span class="comment"># 在item3元素后插入item4元素</span></div><div class="line">(integer) <span class="number">5</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"item0"</span></div><div class="line"><span class="number">2</span>) <span class="string">"item1"</span></div><div class="line"><span class="number">3</span>) <span class="string">"item2"</span></div><div class="line"><span class="number">4</span>) <span class="string">"item3"</span></div><div class="line"><span class="number">5</span>) <span class="string">"item4"</span></div></pre></td></tr></table></figure>
<p><strong> 5. lindex: 返回列表中指定位置的元素 </strong></p>
<blockquote>
<p>索引从0开始，表示第一个元素；索引从-1开始，表示最后一个元素</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"item0"</span></div><div class="line"><span class="number">2</span>) <span class="string">"item1"</span></div><div class="line"><span class="number">3</span>) <span class="string">"item2"</span></div><div class="line"><span class="number">4</span>) <span class="string">"item3"</span></div><div class="line"><span class="number">5</span>) <span class="string">"item4"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lindex list <span class="number">1</span></div><div class="line"><span class="string">"item1"</span></div></pre></td></tr></table></figure>
<p><strong> 6. lset: 修改指定位置的元素 </strong></p>
<blockquote>
<p>索引从0开始，表示第一个元素；索引从-1开始，表示最后一个元素</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"item0"</span></div><div class="line"><span class="number">2</span>) <span class="string">"item1"</span></div><div class="line"><span class="number">3</span>) <span class="string">"item2"</span></div><div class="line"><span class="number">4</span>) <span class="string">"item3"</span></div><div class="line"><span class="number">5</span>) <span class="string">"item4"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lset list <span class="number">2</span> item-two</div><div class="line">OK</div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"item0"</span></div><div class="line"><span class="number">2</span>) <span class="string">"item1"</span></div><div class="line"><span class="number">3</span>) <span class="string">"item-two"</span></div><div class="line"><span class="number">4</span>) <span class="string">"item3"</span></div><div class="line"><span class="number">5</span>) <span class="string">"item4"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lset list <span class="number">-1</span> item-four</div><div class="line">OK</div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"item0"</span></div><div class="line"><span class="number">2</span>) <span class="string">"item1"</span></div><div class="line"><span class="number">3</span>) <span class="string">"item-two"</span></div><div class="line"><span class="number">4</span>) <span class="string">"item3"</span></div><div class="line"><span class="number">5</span>) <span class="string">"item-four"</span></div></pre></td></tr></table></figure>
<p><strong> 7. lrem: 移除指定个数的元素 </strong></p>
<blockquote>
<p>讲列表中前count个值为value的元素移除<br>count &gt; 0: 从头往尾移除<br>count &lt; 0: 从尾往头移除<br>count = 0: 移除所有</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange mylist <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"0"</span></div><div class="line"><span class="number">2</span>) <span class="string">"1"</span></div><div class="line"><span class="number">3</span>) <span class="string">"2"</span></div><div class="line"><span class="number">4</span>) <span class="string">"1"</span></div><div class="line"><span class="number">5</span>) <span class="string">"0"</span></div><div class="line"><span class="number">6</span>) <span class="string">"1"</span></div><div class="line"><span class="number">7</span>) <span class="string">"2"</span></div><div class="line"><span class="number">8</span>) <span class="string">"3"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrem mylist <span class="number">0</span> <span class="number">1</span>  <span class="comment"># 移除所有的1</span></div><div class="line">(integer) <span class="number">3</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange mylist <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"0"</span></div><div class="line"><span class="number">2</span>) <span class="string">"2"</span></div><div class="line"><span class="number">3</span>) <span class="string">"0"</span></div><div class="line"><span class="number">4</span>) <span class="string">"2"</span></div><div class="line"><span class="number">5</span>) <span class="string">"3"</span></div><div class="line"></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrem mylist <span class="number">2</span> <span class="number">2</span>  <span class="comment"># 移除前两个2，注意是从左开始计数</span></div><div class="line">(integer) <span class="number">2</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange mylist <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"0"</span></div><div class="line"><span class="number">2</span>) <span class="string">"0"</span></div><div class="line"><span class="number">3</span>) <span class="string">"3"</span></div><div class="line"></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange mylist <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"3"</span></div><div class="line"><span class="number">2</span>) <span class="string">"0"</span></div><div class="line"><span class="number">3</span>) <span class="string">"0"</span></div><div class="line"><span class="number">4</span>) <span class="string">"3"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrem mylist <span class="number">-1</span> <span class="number">3</span>  <span class="comment"># 从右开始计数，移除一个3</span></div><div class="line">(integer) <span class="number">1</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange mylist <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"3"</span></div><div class="line"><span class="number">2</span>) <span class="string">"0"</span></div><div class="line"><span class="number">3</span>) <span class="string">"0"</span></div></pre></td></tr></table></figure>
<p><strong> 8. lpop: 移除并返回列表最左端的元素 </strong><br><strong> 9. rpop: 移除并返回列表最右端的元素 </strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange mylist <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"1"</span></div><div class="line"><span class="number">2</span>) <span class="string">"2"</span></div><div class="line"><span class="number">3</span>) <span class="string">"3"</span></div><div class="line"><span class="number">4</span>) <span class="string">"4"</span></div><div class="line"><span class="number">5</span>) <span class="string">"5"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lpop mylist</div><div class="line"><span class="string">"1"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; rpop mylist</div><div class="line"><span class="string">"5"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange mylist <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"2"</span></div><div class="line"><span class="number">2</span>) <span class="string">"3"</span></div><div class="line"><span class="number">3</span>) <span class="string">"4"</span></div></pre></td></tr></table></figure>
<p><strong> 10. blpop: 移除并返回列表最左端的元素(阻塞) </strong><br><strong> 11. brpop: 移除并返回列表最右端的元素(阻塞) </strong></p>
<blockquote>
<p>可以有多个key-name,多个key-name的执行顺序：依次从左key-name取值，当把左key-name中的值都取完后再取下一个key-name值，等把把有key-name的值都取完后，进入阻塞状态<br>阻塞的超时时间设定：当不设置超时时间，表示永久阻塞；否则按设置的时间退出阻塞。<br>在阻塞时，如果此时的key-name中有了新值后，则马上返回新值并退出阻塞</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange list1 <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"list1-1"</span></div><div class="line"><span class="number">2</span>) <span class="string">"list1-2"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange list2 <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"list2-1"</span></div><div class="line"><span class="number">2</span>) <span class="string">"list2-2"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; blpop list1 list2 <span class="number">3</span></div><div class="line"><span class="number">1</span>) <span class="string">"list1"</span></div><div class="line"><span class="number">2</span>) <span class="string">"list1-1"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; blpop list1 list2 <span class="number">3</span></div><div class="line"><span class="number">1</span>) <span class="string">"list1"</span></div><div class="line"><span class="number">2</span>) <span class="string">"list1-2"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; blpop list1 list2 <span class="number">3</span></div><div class="line"><span class="number">1</span>) <span class="string">"list2"</span></div><div class="line"><span class="number">2</span>) <span class="string">"list2-1"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; blpop list1 list2 <span class="number">3</span></div><div class="line"><span class="number">1</span>) <span class="string">"list2"</span></div><div class="line"><span class="number">2</span>) <span class="string">"list2-2"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; blpop list1 list2 <span class="number">3</span></div><div class="line">(nil)</div><div class="line">(<span class="number">3.03</span>s)</div></pre></td></tr></table></figure>
<p><strong> 12. ltrim: 保留start和end之间的元素，start和end都保留 </strong></p>
<blockquote>
<p>索引从0开始</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"0"</span></div><div class="line"><span class="number">2</span>) <span class="string">"1"</span></div><div class="line"><span class="number">3</span>) <span class="string">"2"</span></div><div class="line"><span class="number">4</span>) <span class="string">"3"</span></div><div class="line"><span class="number">5</span>) <span class="string">"4"</span></div><div class="line"><span class="number">6</span>) <span class="string">"5"</span></div><div class="line"><span class="number">7</span>) <span class="string">"6"</span></div><div class="line"><span class="number">8</span>) <span class="string">"7"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; ltrim list <span class="number">3</span> <span class="number">5</span></div><div class="line">OK</div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange list <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"3"</span></div><div class="line"><span class="number">2</span>) <span class="string">"4"</span></div><div class="line"><span class="number">3</span>) <span class="string">"5"</span></div></pre></td></tr></table></figure>
<p><strong> 13. rpoplpush: 将source-key最右端元素取出，并插入到dest-key最左端 </strong><br><strong> 14. brpoplpush: 将source-key最右端元素取出，并插入到dest-key最左端(阻塞) </strong></p>
<blockquote>
<p>操作完成扣，source-key中的元素为空，dest-key保留了source-key中的元素</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange list1 <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"1"</span></div><div class="line"><span class="number">2</span>) <span class="string">"2"</span></div><div class="line"><span class="number">3</span>) <span class="string">"3"</span></div><div class="line"><span class="number">4</span>) <span class="string">"4"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; rpoplpush list1 mylist</div><div class="line"><span class="string">"4"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; rpoplpush list1 mylist</div><div class="line"><span class="string">"3"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; rpoplpush list1 mylist</div><div class="line"><span class="string">"2"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; rpoplpush list1 mylist</div><div class="line"><span class="string">"1"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; lrange mylist <span class="number">0</span> <span class="number">-1</span></div><div class="line"><span class="number">1</span>) <span class="string">"1"</span></div><div class="line"><span class="number">2</span>) <span class="string">"2"</span></div><div class="line"><span class="number">3</span>) <span class="string">"3"</span></div><div class="line"><span class="number">4</span>) <span class="string">"4"</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://xinhuahuang.github.io/2015/05/16/Redis命令之-hash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xinhua huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xinhua's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/16/Redis命令之-hash/" itemprop="url">
                  Redis命令之--hash
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-05-16T22:04:44+08:00">
                2015-05-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Redis基本数据类型"><a href="#Redis基本数据类型" class="headerlink" title="Redis基本数据类型"></a>Redis基本数据类型</h2><p>Redis支持五种数据类型：</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>含义 </th>
</tr>
</thead>
<tbody>
<tr>
<td>string</td>
<td>字符串  </td>
</tr>
<tr>
<td>hash</td>
<td>哈希  </td>
</tr>
<tr>
<td>list</td>
<td>列表  </td>
</tr>
<tr>
<td>set</td>
<td>集合</td>
</tr>
<tr>
<td>zset (Sorted set)</td>
<td>有序集合</td>
</tr>
</tbody>
</table>
<h3 id="哈希–hash"><a href="#哈希–hash" class="headerlink" title="哈希–hash"></a>哈希–hash</h3><blockquote>
<p>Hash 可以包含多个key-value键值对：</p>
<ul>
<li>key: 表示一个字段</li>
<li>value: 表示一个字段对应的值</li>
</ul>
</blockquote>
<p>Hash常用的命令</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>用例和描述 </th>
</tr>
</thead>
<tbody>
<tr>
<td>hset</td>
<td>hset key-name key value ——为哈希集里面的一个键设置值</td>
</tr>
<tr>
<td>hget</td>
<td>hget key-name key  ——获取哈希集里面的一个键的值</td>
</tr>
<tr>
<td>hsetnx</td>
<td>hsetnx key-name key value  ——为哈希集里面的一个键设置值，如果key-name存在，则不执行操作</td>
</tr>
<tr>
<td>hmset</td>
<td>hmset key-name key1 value1 key2 value2…  ——为哈希集里面的一个或多个键设置值</td>
</tr>
<tr>
<td>hmget</td>
<td>hmget key-name key1 key2  ——获取哈希集里面的一个或多个键的值</td>
</tr>
<tr>
<td>hkeys</td>
<td>hkeys key-name  ——获取哈希集里面所有的键</td>
</tr>
<tr>
<td>hvals</td>
<td>hvals key-name  ——获取哈希集里面所有的值</td>
</tr>
<tr>
<td>hgetall</td>
<td>hgetall key-name  ——获取哈希集里面所有的键值对</td>
</tr>
<tr>
<td>hlen</td>
<td>hlen key-name  ——获取哈希集的长度</td>
</tr>
<tr>
<td>hincrby</td>
<td>hincrby key-name key increment ——将键key存储的值加上整数increment</td>
</tr>
<tr>
<td>hincrbyfloat</td>
<td>hincrbyfloat key-name key increment ——将键key存储的值加上浮点数increment</td>
</tr>
<tr>
<td>hexists</td>
<td>hexists key-name key  ——检查给定的键是否存在于哈希集中</td>
</tr>
<tr>
<td>hdel</td>
<td>hdel key-name key1 key2…  ——删除哈希集里面的一个或多个键值对，返回成功找到并删除的键值对数量</td>
</tr>
<tr>
<td>hstrlen</td>
<td>hstrlen key-name key  ——返回给定键的值的长度</td>
</tr>
</tbody>
</table>
<h3 id="常用的命令使用"><a href="#常用的命令使用" class="headerlink" title="常用的命令使用"></a>常用的命令使用</h3><p><strong> 1. hset: 为哈希集里面的一个键设置值 </strong></p>
<blockquote>
<p>如果键不存在，则在哈希集里面添加一个新的键值对；否则，给指定的健修改新的值</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hset myhash name <span class="string">'zhangshan'</span></div><div class="line">(integer) <span class="number">1</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hset myhash name <span class="string">'zhangshanfeng'</span></div><div class="line">(integer) <span class="number">0</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hget myhash name</div><div class="line"><span class="string">"zhangshanfeng"</span></div></pre></td></tr></table></figure>
<p><strong> 2. hget: 获取哈希集里面的一个键的值 </strong></p>
<blockquote>
<p>如果键存在，则返回哈希集里面指定键的值；否则返回nil</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hget myhash name</div><div class="line"><span class="string">"zhangshan"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hget myhash age</div><div class="line">(nil)</div></pre></td></tr></table></figure>
<p><strong> 3. hsetnx: 为哈希集里面的一个键设置值，如果key-name存在，则不执行操作 </strong></p>
<blockquote>
<p>如果键不存在，则在哈希集里面添加一个新的键值对；否则，不做任何操作</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hsetnx myhash age <span class="number">10</span></div><div class="line">(integer) <span class="number">1</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hget myhash age</div><div class="line"><span class="string">"10"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hsetnx myhash age <span class="number">20</span></div><div class="line">(integer) <span class="number">0</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hget myhash age</div><div class="line"><span class="string">"10"</span></div></pre></td></tr></table></figure>
<p><strong> 4. hmset: 为哈希集里面的一个或多个键设置值 </strong><br><strong> 5. hmget: 获取哈希集里面的一个或多个键的值 </strong></p>
<blockquote>
<p>hset只能给一个键设置值，hmset可以设置多个</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hmset myhash gender <span class="string">'man'</span> hometown <span class="string">'china'</span></div><div class="line">OK</div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hmget myhash gender hometown</div><div class="line"><span class="number">1</span>) <span class="string">"man"</span></div><div class="line"><span class="number">2</span>) <span class="string">"china"</span></div></pre></td></tr></table></figure>
<p><strong> 6. hkeys: 获取哈希集里面所有的键 </strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hkeys myhash</div><div class="line"><span class="number">1</span>) <span class="string">"name"</span></div><div class="line"><span class="number">2</span>) <span class="string">"age"</span></div><div class="line"><span class="number">3</span>) <span class="string">"gender"</span></div><div class="line"><span class="number">4</span>) <span class="string">"hometown"</span></div></pre></td></tr></table></figure>
<p><strong> 7. hvals:  获取哈希集里面所有的值 </strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hvals myhash</div><div class="line"><span class="number">1</span>) <span class="string">"zhangshanfeng"</span></div><div class="line"><span class="number">2</span>) <span class="string">"10"</span></div><div class="line"><span class="number">3</span>) <span class="string">"man"</span></div><div class="line"><span class="number">4</span>) <span class="string">"china"</span></div></pre></td></tr></table></figure>
<p><strong> 8. hgetall：获取哈希集里面所有的键值对 </strong></p>
<blockquote>
<p>在redis-cli里面要显示中文的话，得使用redis-cli –raw</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hgetall myhash</div><div class="line">name</div><div class="line">zhangshanfeng</div><div class="line">age</div><div class="line"><span class="number">10</span></div><div class="line">gender</div><div class="line">男</div><div class="line">hometown</div><div class="line">china</div></pre></td></tr></table></figure>
<p><strong> 9. hlen: 获取哈希的长度 </strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hlen myhash</div><div class="line"><span class="number">4</span></div></pre></td></tr></table></figure>
<p><strong> 10. hincrby: 将键key存储的值加上整数increment </strong></p>
<blockquote>
<p>这里的key必须是整型，否则会报错</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hincrby myhash age <span class="number">1</span></div><div class="line"><span class="number">11</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hincrby myhash gender <span class="number">1</span></div><div class="line">ERR hash value <span class="keyword">is</span> <span class="keyword">not</span> an integer</div></pre></td></tr></table></figure>
<p><strong> 11. hincrbyfloat: 将键key存储的值加上浮点数increment </strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hset myhash salary <span class="string">'100.00'</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hincrbyfloat myhash salary <span class="number">1.0</span></div><div class="line"><span class="number">101</span></div></pre></td></tr></table></figure>
<p><strong> 12. hexists: 检查给定的键是否存在于哈希集中 </strong></p>
<blockquote>
<p>当key在哈希中存在时，返回1； 否则，返回0</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hexists myhash salary</div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hexists myhash address</div><div class="line"><span class="number">0</span></div></pre></td></tr></table></figure>
<p><strong> 13. hdel:  删除哈希集里面的一个或多个键值对，返回成功找到并删除的键值对数量 </strong></p>
<blockquote>
<p>当key在哈希中不存在时，返回0； 否则，返回1</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">0</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hdel myhash salary age</div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>
<p><strong> 14. hstrlen: 返回给定键的值的长度 </strong> </p>
<blockquote>
<p>当key在哈希中存在时，返回实际键值的长度； 否则，返回0</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hstrlen myhash name</div><div class="line"><span class="number">13</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; hstrlen myhash address</div><div class="line"><span class="number">0</span></div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://xinhuahuang.github.io/2015/05/16/Redis命令之--string/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xinhua huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xinhua's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/16/Redis命令之--string/" itemprop="url">
                  Redis命令之--string
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-05-16T16:25:26+08:00">
                2015-05-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Redis基本数据类型"><a href="#Redis基本数据类型" class="headerlink" title="Redis基本数据类型"></a>Redis基本数据类型</h2><p>Redis支持五种数据类型：</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>含义 </th>
</tr>
</thead>
<tbody>
<tr>
<td>string</td>
<td>字符串  </td>
</tr>
<tr>
<td>hash</td>
<td>哈希  </td>
</tr>
<tr>
<td>list</td>
<td>列表  </td>
</tr>
<tr>
<td>set</td>
<td>集合</td>
</tr>
<tr>
<td>zset (Sorted set)</td>
<td>有序集合</td>
</tr>
</tbody>
</table>
<h3 id="字符串–string"><a href="#字符串–string" class="headerlink" title="字符串–string"></a>字符串–string</h3><blockquote>
<p>string是redis最基本的类型，这里的string并不是python里面的string，redis里面的string不仅包括了字符和字符串，同时也包括了数字。<br>string中一个键最大可以存储512MB</p>
</blockquote>
<p>string常用的命令</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>用例和描述 </th>
</tr>
</thead>
<tbody>
<tr>
<td>set</td>
<td>set key-name value ——创建和修改键值对</td>
</tr>
<tr>
<td>get</td>
<td>get key-name ——获取一个键值对的值 </td>
</tr>
<tr>
<td>setnx</td>
<td>setnx key-name value ——创建一个键值对，如果key-name存在则不执行操作</td>
</tr>
<tr>
<td>setex</td>
<td>setex key-name seconds value ——创建/修改一个键值对并设置时限</td>
</tr>
<tr>
<td>mset</td>
<td>mset key-name1 value1 key-name2 value2 … ——创建/修改多个键值对</td>
</tr>
<tr>
<td>mget</td>
<td>mget key-name1 key-name2 ——获取多个键值对</td>
</tr>
<tr>
<td>msetnx</td>
<td>msetnx key-name1 value1 key-name2 value2 … ——创建多个键值对，如果其中任意一个key-name存在，则都不执行操作</td>
</tr>
<tr>
<td>getset</td>
<td>getset key-name value ——获取一个键值对的值，并修改</td>
</tr>
<tr>
<td>setrange</td>
<td>setrange key-name offset value ——指定位置向后覆盖一个键值对的值</td>
</tr>
<tr>
<td>getrange</td>
<td>getrange key-name start end ——指定区间获取一个键值对的值</td>
</tr>
<tr>
<td>incr</td>
<td>incr key-name ——将键存储的值加1</td>
</tr>
<tr>
<td>incrby</td>
<td>incrby key-name amount ——将键存储的值加上整数amount</td>
</tr>
<tr>
<td>decr</td>
<td>decr key-name ——将键存储的值减1</td>
</tr>
<tr>
<td>decrby</td>
<td>decrby key-name amount ——将键存储的值减去整数amount</td>
</tr>
<tr>
<td>append</td>
<td>append key-name value ——将value值追加到key-name的末尾</td>
</tr>
</tbody>
</table>
<h3 id="常用的命令使用"><a href="#常用的命令使用" class="headerlink" title="常用的命令使用"></a>常用的命令使用</h3><p><strong> 1. set: 创建和修改键值对 </strong></p>
<blockquote>
<p>设置key-name对应的value值，如果key-name存在则修改value值；否则创建新的key-name并赋值</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; set name <span class="string">'xinhua'</span></div><div class="line">OK</div></pre></td></tr></table></figure>
<p><strong> 2. get: 获取一个键值对的值 </strong></p>
<blockquote>
<p>如果key-name不存在，则返回nil</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; get name</div><div class="line"><span class="string">"xinhua"</span></div></pre></td></tr></table></figure>
<p><strong> 3. setnx: 创建一个键值对，如果key-name存在则不执行操作 </strong></p>
<blockquote>
<p>如果key-name不存在，则创建；否则，不做任何操作</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; setnx name <span class="string">'xhhuang'</span>   <span class="comment"># key-name存在，不做任何操作</span></div><div class="line">(integer) <span class="number">0</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; setnx age <span class="number">18</span></div><div class="line">(integer) <span class="number">1</span></div></pre></td></tr></table></figure>
<p><strong> 4. setex: 创建/修改一个键值对并设置时限  </strong></p>
<blockquote>
<p>如果设置的键值对超出指定时间后，则该键值对删除</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; setex gender <span class="number">3</span> <span class="string">'male'</span>  <span class="comment"># 这里设置3秒超时，当超出3秒后gender删除</span></div><div class="line">OK</div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; get gender</div><div class="line"><span class="string">"male"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; get gender</div><div class="line">(nil)</div></pre></td></tr></table></figure>
<p><strong> 5. mset: 创建/修改多个键值对 </strong></p>
<blockquote>
<p>set只能设置一个键值对，mset可以设置多个</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; mset name <span class="string">'zhangshan'</span> age <span class="number">20</span></div><div class="line">OK</div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; get name</div><div class="line"><span class="string">"zhangshan"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; get age</div><div class="line"><span class="string">"20"</span></div></pre></td></tr></table></figure>
<p><strong> 6. mget: 获取多个键值对 </strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; mget name age</div><div class="line"><span class="number">1</span>) <span class="string">"zhangshan"</span></div><div class="line"><span class="number">2</span>) <span class="string">"20"</span></div></pre></td></tr></table></figure></p>
<p><strong> 7. msetnx: 创建多个键值对，如果其中任意一个key-name存在，则都不执行操作 </strong></p>
<blockquote>
<p>只有当所添加的键值对都不存在时才添加，否则不执行操作</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; msetnx name <span class="string">'lishi'</span> gender <span class="string">'male'</span>  <span class="comment"># 这里name已经存在了，所以msetnx整个操作都不执行</span></div><div class="line">(integer) <span class="number">0</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; mget name gender</div><div class="line"><span class="number">1</span>) <span class="string">"zhangshan"</span></div><div class="line"><span class="number">2</span>) (nil)</div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; mset gender <span class="string">'male'</span> address <span class="string">'shanghai'</span></div><div class="line">OK</div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; mget gender address</div><div class="line"><span class="number">1</span>) <span class="string">"male"</span></div><div class="line"><span class="number">2</span>) <span class="string">"shanghai"</span></div></pre></td></tr></table></figure>
<p><strong> 8. getset: 获取一个键值对的值，并修改 </strong></p>
<blockquote>
<p>这里将get、set两个操作合起来操作，先执行get操作，将数据取出来； 然后再执行set操作</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; getset name <span class="string">'xiaoming'</span></div><div class="line"><span class="string">"zhangshan"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; get name</div><div class="line"><span class="string">"xiaoming"</span></div></pre></td></tr></table></figure>
<p><strong> 9. setrange: 指定位置向后覆盖一个键值对的值 </strong></p>
<blockquote>
<p>覆盖key-name对应的string的一部分，从指定的offset处开始，覆盖value的长度</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; set email <span class="string">'xiaoming@sina.com'</span>  <span class="comment"># 注： setrange的索引是从1开始的</span></div><div class="line">OK</div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; setrange email <span class="number">9</span> <span class="string">"gmail.com"</span></div><div class="line">(integer) <span class="number">18</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; get email</div><div class="line"><span class="string">"xiaoming@gmail.com"</span></div></pre></td></tr></table></figure>
<p><strong> 10. getrange: 指定区间获取一个键值对的值 </strong></p>
<blockquote>
<p>获取指定key-name的value值的子字符串。是由start和end位移决定的</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; get email</div><div class="line"><span class="string">"xiaoming@sina.com"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; getrange email <span class="number">0</span> <span class="number">7</span>  <span class="comment"># 注: getrange的索引是从0开始的</span></div><div class="line"><span class="string">"xiaoming"</span></div></pre></td></tr></table></figure>
<p><strong> 11. incr: 将键存储的值加1 </strong></p>
<blockquote>
<p>这里的键所存储的值必须是整数，否则报错</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; incr name</div><div class="line">(error) ERR value <span class="keyword">is</span> <span class="keyword">not</span> an integer <span class="keyword">or</span> out of range</div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; get age</div><div class="line"><span class="string">"20"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; incr age</div><div class="line">(integer) <span class="number">21</span></div></pre></td></tr></table></figure>
<p><strong> 12. incrby 将键存储的值加上整数amount </strong></p>
<blockquote>
<p>这里的键所存储的值必须是整数，否则报错</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; incrby name <span class="number">10</span></div><div class="line">(error) ERR value <span class="keyword">is</span> <span class="keyword">not</span> an integer <span class="keyword">or</span> out of range</div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; incrby age <span class="number">10</span></div><div class="line">(integer) <span class="number">31</span></div></pre></td></tr></table></figure>
<p><strong> 13. decr 将键存储的值减1 </strong></p>
<blockquote>
<p>这里的键所存储的值必须是整数，否则报错</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; decr name</div><div class="line">(error) ERR value <span class="keyword">is</span> <span class="keyword">not</span> an integer <span class="keyword">or</span> out of range</div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; get age</div><div class="line"><span class="string">"31"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; decr age   <span class="comment"># 另外，也可以使用 set age -1替代</span></div><div class="line">(integer) <span class="number">30</span></div></pre></td></tr></table></figure>
<p><strong> 14. decrby 将键存储的值减去整数amount </strong></p>
<blockquote>
<p>这里的键所存储的值必须是整数，否则报错</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; decrby name <span class="number">10</span></div><div class="line">(error) ERR value <span class="keyword">is</span> <span class="keyword">not</span> an integer <span class="keyword">or</span> out of range</div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; decrby age <span class="number">10</span></div><div class="line">(integer) <span class="number">20</span></div></pre></td></tr></table></figure>
<p><strong> 15. append 将value值追加到key-name的末尾 </strong></p>
<blockquote>
<p>如果key-name存在，则在原来的value值后面追加； 否则，创建一个新的键值对</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; get name</div><div class="line"><span class="string">"xiaoming"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; append name <span class="string">'xing'</span></div><div class="line">(integer) <span class="number">12</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; get name</div><div class="line"><span class="string">"xiaomingxing"</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; append phone <span class="string">'13813812338'</span></div><div class="line">(integer) <span class="number">11</span></div><div class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; get phone</div><div class="line"><span class="string">"13813812338"</span></div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://xinhuahuang.github.io/2015/04/09/排序/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xinhua huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xinhua's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/09/排序/" itemprop="url">
                  排序
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-04-09T16:24:58+08:00">
                2015-04-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><p><strong> 冒泡排序 </strong>（英语：Bubble Sort）是一种简单的排序算法。它重复地遍历要排序的数列，一次比较两个元素，如果他们的顺序错误就把他们交换过来。遍历数列的工作是重复地进行直到没有再需要交换，也就是说该数列已经排序完成。这个算法的名字由来是因为越小的元素会经由交换慢慢“浮”到数列的顶端。</p>
<p><strong> 冒泡排序算法的运作如下：</strong></p>
<ul>
<li>比较相邻的元素。如果第一个比第二个大（升序），就交换他们两个。</li>
<li>对每一对相邻元素作同样的工作，从开始第一对到结尾的最后一对。这步做完后，最后的元素会是最大的数。</li>
<li>针对所有的元素重复以上的步骤，除了最后一个。</li>
<li>持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。</li>
</ul>
<h3 id="冒泡排序分析"><a href="#冒泡排序分析" class="headerlink" title="冒泡排序分析"></a>冒泡排序分析</h3><p><img src="/img/排序/bubblesort.jpg" alt=""></p>
<h3 id="冒泡排序实现"><a href="#冒泡排序实现" class="headerlink" title="冒泡排序实现"></a>冒泡排序实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">bubble_sort</span><span class="params">()</span>:</span></div><div class="line">    <span class="string">"""冒泡排序"""</span></div><div class="line">    alist = [<span class="number">23</span>,<span class="number">45</span>,<span class="number">1</span>,<span class="number">56</span>,<span class="number">21</span>,<span class="number">66</span>,<span class="number">11</span>,<span class="number">100</span>,<span class="number">0</span>,<span class="number">-1</span>]</div><div class="line">    n = len(alist)</div><div class="line"></div><div class="line">    <span class="comment"># 对于有n个元素的列表，需要n-1次选择操作</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n<span class="number">-1</span>):</div><div class="line">        <span class="comment"># 对列表中每个元素进行遍历，range(i,n-1)表示忽略已排序好的</span></div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(i,n<span class="number">-1</span>):</div><div class="line">            <span class="comment"># 找出最小值进行交换</span></div><div class="line">            <span class="keyword">if</span> alist[i] &gt; alist[j+<span class="number">1</span>]:</div><div class="line">                alist[i],alist[j+<span class="number">1</span>] = alist[j+<span class="number">1</span>],alist[i]</div><div class="line"></div><div class="line">    <span class="keyword">print</span> alist</div></pre></td></tr></table></figure>
<h2 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h2><p><strong> 选择排序 </strong>（Selection sort）是一种简单直观的排序算法。它的工作原理如下。首先在未排序序列中找到最小（大）元素，存放到排序序列的起始位置，然后，再从剩余未排序元素中继续寻找最小（大）元素，然后放到已排序序列的末尾。以此类推，直到所有元素均排序完毕。</p>
<p>选择排序的主要优点与数据移动有关。如果某个元素位于正确的最终位置上，则它不会被移动。选择排序每次交换一对元素，它们当中至少有一个将被移到其最终位置上，因此对n个元素的表进行排序总共进行至多n-1次交换。在所有的完全依靠交换去移动元素的排序方法中，选择排序属于非常好的一种。</p>
<h3 id="选择排序分析"><a href="#选择排序分析" class="headerlink" title="选择排序分析"></a>选择排序分析</h3><p><img src="/img/排序/selectionsort.jpg" alt=""></p>
<h3 id="选择排序实现"><a href="#选择排序实现" class="headerlink" title="选择排序实现"></a>选择排序实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">selection_sort</span><span class="params">()</span>:</span></div><div class="line">    <span class="string">"""选择排序"""</span></div><div class="line">    alist = [<span class="number">23</span>,<span class="number">45</span>,<span class="number">1</span>,<span class="number">56</span>,<span class="number">21</span>,<span class="number">66</span>,<span class="number">11</span>,<span class="number">100</span>,<span class="number">0</span>,<span class="number">-1</span>]</div><div class="line">    n = len(alist)</div><div class="line"></div><div class="line">    <span class="comment"># 对于有n个元素的列表，需要n-1次选择操作</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n<span class="number">-1</span>):</div><div class="line">        <span class="comment"># 假设当前的索引为最小值</span></div><div class="line">        min_index = i</div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(i+<span class="number">1</span>,n):</div><div class="line">            <span class="comment"># 找出比当前索引值更小的索引</span></div><div class="line">            <span class="keyword">if</span> alist[min_index] &gt; alist[j]:</div><div class="line">                min_index = j</div><div class="line">        <span class="comment"># 如果索引值与初始索引一致，表示初始索引就是最小值不交换；否则，进行交换</span></div><div class="line">        <span class="keyword">if</span> min_index != i:</div><div class="line">            alist[i],alist[min_index] = alist[min_index],alist[i]</div><div class="line">    </div><div class="line">    <span class="keyword">print</span> alist</div></pre></td></tr></table></figure>
<h2 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h2><p><strong> 插入排序 </strong>（英语：Insertion Sort）是一种简单直观的排序算法。它的工作原理是通过构建有序序列，对于未排序数据，在已排序序列中从后向前扫描，找到相应位置并插入。插入排序在实现上，在从后向前扫描过程中，需要反复把已排序元素逐步向后挪位，为最新元素提供插入空间。</p>
<h3 id="插入排序分析"><a href="#插入排序分析" class="headerlink" title="插入排序分析"></a>插入排序分析</h3><p><img src="/img/排序/Insertion-sort-example.gif" alt=""></p>
<h3 id="插入排序实现"><a href="#插入排序实现" class="headerlink" title="插入排序实现"></a>插入排序实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert_sort</span><span class="params">()</span>:</span></div><div class="line">    <span class="string">"""插入排序"""</span></div><div class="line">    alist = [<span class="number">23</span>,<span class="number">45</span>,<span class="number">1</span>,<span class="number">56</span>,<span class="number">21</span>,<span class="number">66</span>,<span class="number">11</span>,<span class="number">100</span>,<span class="number">0</span>,<span class="number">-1</span>]</div><div class="line">    n = len(alist)</div><div class="line"></div><div class="line">    <span class="comment"># 假设列表中第一个元素是已排序过</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,n):</div><div class="line">        <span class="comment"># 每次从后往前依次比较，如果后面的值&lt;前面的值，则两个值交换</span></div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(i,<span class="number">0</span>,<span class="number">-1</span>):</div><div class="line">            <span class="keyword">if</span> alist[j] &lt; alist[j<span class="number">-1</span>]:</div><div class="line">                alist[j],alist[j<span class="number">-1</span>] = alist[j<span class="number">-1</span>],alist[j]</div><div class="line"></div><div class="line">    <span class="keyword">print</span> alist</div></pre></td></tr></table></figure>
<h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><p><strong> 快速排序 </strong>（英语：Quicksort），又称划分交换排序（partition-exchange sort），通过一趟排序将要排序的数据分割成独立的两部分，其中一部分的所有数据都比另外一部分的所有数据都要小，然后再按此方法对这两部分数据分别进行快速排序，整个排序过程可以递归进行，以此达到整个数据变成有序序列。</p>
<p><strong> 步骤为： </strong></p>
<ul>
<li>从数列中挑出一个元素，称为”基准”（pivot），</li>
<li>重新排序数列，所有元素比基准值小的摆放在基准前面，所有元素比基准值大的摆在基准的后面（相同的数可以到任一边）。在这个分区结束之后，该基准就处于数列的中间位置。这个称为分区（partition）操作。</li>
<li>递归地（recursive）把小于基准值元素的子数列和大于基准值元素的子数列排序。</li>
</ul>
<p>递归的最底部情形，是数列的大小是零或一，也就是永远都已经被排序好了。虽然一直递归下去，但是这个算法总会结束，因为在每次的迭代（iteration）中，它至少会把一个元素摆到它最后的位置去。</p>
<h3 id="快速排序分析"><a href="#快速排序分析" class="headerlink" title="快速排序分析"></a>快速排序分析</h3><p><img src="/img/排序/快速排序.jpg" alt=""></p>
<h3 id="快速排序实现"><a href="#快速排序实现" class="headerlink" title="快速排序实现"></a>快速排序实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">quick_sort</span><span class="params">(alist, first, last)</span>:</span></div><div class="line">    <span class="comment"># 用来退出递归，表示左右两边的指针已从两端汇集在一起</span></div><div class="line">    <span class="keyword">if</span> first &gt;= last:</div><div class="line">        <span class="keyword">return</span></div><div class="line"></div><div class="line">    <span class="comment"># 假设列表的最左端是一个中间值，小于min_value放在列表的左端；大于min_value放在列表的右端</span></div><div class="line">    min_value = alist[first]</div><div class="line">    low = first</div><div class="line">    high = last</div><div class="line"></div><div class="line">    <span class="comment"># 从列表的两端开始遍历</span></div><div class="line">    <span class="keyword">while</span> low &lt; high:</div><div class="line">        <span class="comment"># 如果最右端的值&gt;=min_value，将最右端下标往前移一位</span></div><div class="line">        <span class="keyword">while</span> low &lt; high <span class="keyword">and</span> alist[high] &gt;= min_value: </div><div class="line">            high -= <span class="number">1</span></div><div class="line"></div><div class="line">        <span class="comment"># 如果最左端的值&lt;=min_value，将最左端下标往后移一位</span></div><div class="line">        <span class="keyword">while</span> low &lt; high <span class="keyword">and</span> alist[low] &lt;= min_value: </div><div class="line">            low += <span class="number">1</span></div><div class="line"></div><div class="line">        <span class="comment"># 当最右端的值&lt;min_value，并且最左端的值&gt;min_value时，将左右两端的值进行交换</span></div><div class="line">        alist[low], alist[high] = alist[high], alist[low]</div><div class="line"></div><div class="line">    <span class="comment"># 当两端的索引指向同一个位置的时候，将当前的值与min_value进行交换</span></div><div class="line">    <span class="comment"># 因为此时low和high指向的是同一个位置，所以也可以用这里的代码：</span></div><div class="line">    <span class="comment"># alist[first], alist[low] = alist[low], min_value</span></div><div class="line">    alist[first], alist[high] = alist[high], min_value</div><div class="line"></div><div class="line">    quick_sort(alist, first, low<span class="number">-1</span>) <span class="comment"># 用递归的方式继续对左则列表进行排序</span></div><div class="line">    quick_sort(alist, low+<span class="number">1</span>, last) <span class="comment"># 用递归的方式继续对右则列表进行排序</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://xinhuahuang.github.io/2015/04/09/python实现栈和队列/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xinhua huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xinhua's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/09/python实现栈和队列/" itemprop="url">
                  python实现栈和队列
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-04-09T15:54:54+08:00">
                2015-04-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="栈"><a href="#栈" class="headerlink" title="栈"></a>栈</h2><p>栈限定为只能在一端进行插入和删除操作，它是一种后进先出的数据结构。可以把它形象的理解成一个桶，先放进去的数据在桶的最底下，然后数据依次放在之前那个数据上面，最后放进去的数据永远在最上面。取数据是先把桶最上面的数据取出来，然后依次取下面的数据，最先放进去的数据最后取。</p>
<h3 id="栈的实现"><a href="#栈的实现" class="headerlink" title="栈的实现"></a>栈的实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="string">"""栈"""</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">         self.items = []</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_empty</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">"""判断是否为空"""</span></div><div class="line">        <span class="keyword">return</span> self.items == []</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">push</span><span class="params">(self, item)</span>:</span></div><div class="line">        <span class="string">"""加入元素"""</span></div><div class="line">        self.items.append(item)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">"""弹出元素"""</span></div><div class="line">        <span class="keyword">return</span> self.items.pop()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">peek</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">"""返回栈顶元素"""</span></div><div class="line">        <span class="keyword">return</span> self.items[len(self.items)<span class="number">-1</span>]</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">size</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">"""返回栈的大小"""</span></div><div class="line">        <span class="keyword">return</span> len(self.items)</div></pre></td></tr></table></figure>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    stack = Stack()</div><div class="line">    stack.push(<span class="string">"hello"</span>)</div><div class="line">    stack.push(<span class="string">"world"</span>)</div><div class="line">    stack.push(<span class="string">"itcast"</span>)</div><div class="line">    <span class="keyword">print</span> stack.size()</div><div class="line">    <span class="keyword">print</span> stack.peek()</div><div class="line">    <span class="keyword">print</span> stack.pop()</div><div class="line">    <span class="keyword">print</span> stack.pop()</div><div class="line">    <span class="keyword">print</span> stack.pop()</div></pre></td></tr></table></figure>
<h2 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h2><p>队列是一种先进先出的数据结构。可以把它形象的理解为去排队买票，先排队的人应先到窗口买票，最后排队的人最后买到票。</p>
<h3 id="队列的实现"><a href="#队列的实现" class="headerlink" title="队列的实现"></a>队列的实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Queue</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="string">"""队列"""</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.items = []</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_empty</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.items == []</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enqueue</span><span class="params">(self, item)</span>:</span></div><div class="line">        <span class="string">"""进队列"""</span></div><div class="line">        self.items.insert(<span class="number">0</span>,item)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dequeue</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">"""出队列"""</span></div><div class="line">        <span class="keyword">return</span> self.items.pop()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">size</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">"""返回大小"""</span></div><div class="line">        <span class="keyword">return</span> len(self.items)</div></pre></td></tr></table></figure>
<h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    q = Queue()</div><div class="line">    q.enqueue(<span class="string">"hello"</span>)</div><div class="line">    q.enqueue(<span class="string">"world"</span>)</div><div class="line">    q.enqueue(<span class="string">"itcast"</span>)</div><div class="line">    <span class="keyword">print</span> q.size()</div><div class="line">    <span class="keyword">print</span> q.dequeue()</div><div class="line">    <span class="keyword">print</span> q.dequeue()</div><div class="line">    <span class="keyword">print</span> q.dequeue()</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://xinhuahuang.github.io/2015/04/08/Python中如何实现链表/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xinhua huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xinhua's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/04/08/Python中如何实现链表/" itemprop="url">
                  Python中如何实现链表
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-04-08T20:07:49+08:00">
                2015-04-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="单向列表"><a href="#单向列表" class="headerlink" title="单向列表"></a>单向列表</h2><p>单向列表也叫单链表，是链表中最简单的一种形式，它的每个节点包含两个域，一个信息域（元素域）和一个链接域。这个链接指向链表中的下一个节点，而最后一个节点的链接域则指向一个空值。<br><img src="/img/链表/单链表的节点和单链表.png" alt=""></p>
<ul>
<li>表元素域elem用来存放具体的数据。</li>
<li>链接域next用来存放下一个节点的位置（python中的标识） </li>
<li>变量p指向链表的头节点（首节点）的位置，从p出发能找到表中的任意节点。</li>
</ul>
<h3 id="节点的实现"><a href="#节点的实现" class="headerlink" title="节点的实现"></a>节点的实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, elem)</span>:</span></div><div class="line">        <span class="comment"># elem用来存放元素</span></div><div class="line">        self.elem = elem</div><div class="line">        <span class="comment"># 指向下一个节点</span></div><div class="line">        self.next = <span class="keyword">None</span></div></pre></td></tr></table></figure>
<h3 id="单链表的实现"><a href="#单链表的实现" class="headerlink" title="单链表的实现"></a>单链表的实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SingleLinkList</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, node=None)</span>:</span></div><div class="line">        <span class="comment"># 声明一个头节点。默认头节点不指向为None</span></div><div class="line">        self.__head = node</div><div class="line"></div><div class="line">    <span class="comment"># 链表是否为空</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_empty</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="comment"># 如果self.__head is None，则返回为True</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">not</span> self.__head</div><div class="line"></div><div class="line">    <span class="comment"># 链表长度</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">length</span><span class="params">(self)</span>:</span></div><div class="line">        cur = self.__head</div><div class="line">        count = <span class="number">0</span></div><div class="line">        <span class="comment"># 遍历链表并统计节点的个数，直到链表为None时结束</span></div><div class="line">        <span class="keyword">while</span> cur != <span class="keyword">None</span>:</div><div class="line">            count += <span class="number">1</span></div><div class="line">            cur = cur.next</div><div class="line">        <span class="keyword">return</span> count</div><div class="line"></div><div class="line">    <span class="comment"># 遍历整个链表</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">travel</span><span class="params">(self)</span>:</span></div><div class="line">        cur = self.__head</div><div class="line">        <span class="comment"># 遍历链表并打印节点元素，直到链表为None时结束</span></div><div class="line">        <span class="keyword">while</span> cur != <span class="keyword">None</span>:</div><div class="line">            print(cur.elem, end=<span class="string">","</span>) </div><div class="line">            cur = cur.next</div><div class="line">        print()</div></pre></td></tr></table></figure>
<h4 id="头部添加元素"><a href="#头部添加元素" class="headerlink" title="头部添加元素"></a>头部添加元素</h4><p><img src="/img/链表/单链表表头插入元素.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 链表头部添加元素</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(self, item)</span>:</span></div><div class="line">     <span class="comment"># 初始化一个节点</span></div><div class="line">     node = Node(item)</div><div class="line">     <span class="comment"># 让node.next指向了self.__head原指向的地址 </span></div><div class="line">     node.next = self.__head</div><div class="line">     <span class="comment"># 让self.__head指向了node</span></div><div class="line">     self.__head = node</div></pre></td></tr></table></figure>
<h4 id="尾部添加元素"><a href="#尾部添加元素" class="headerlink" title="尾部添加元素"></a>尾部添加元素</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 链表尾部添加元素</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">append</span><span class="params">(self, item)</span>:</span></div><div class="line">    node = Node(item)</div><div class="line">    </div><div class="line">    <span class="comment"># 如果链表为空，则让self.__head直接指向node</span></div><div class="line">    <span class="keyword">if</span> self.is_empty():</div><div class="line">        self.__head = node</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="comment"># 遍历到链表的尾部，然后将node添加到尾部</span></div><div class="line">        cur = self.__head</div><div class="line">        <span class="keyword">while</span> cur.next != <span class="keyword">None</span>:</div><div class="line">            cur = cur.next</div><div class="line">        cur.next = node</div></pre></td></tr></table></figure>
<h4 id="指定位置添加元素"><a href="#指定位置添加元素" class="headerlink" title="指定位置添加元素"></a>指定位置添加元素</h4><p><img src="/img/链表/单链表指定位置添加元素.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 指定位置添加元素</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self, pos, item)</span>:</span></div><div class="line">    <span class="comment"># 如果给定的位置为0或负数，则将节点添加到头部</span></div><div class="line">    <span class="keyword">if</span> pos &lt;= <span class="number">0</span>:</div><div class="line">        self.add(item)</div><div class="line">    <span class="comment"># 如果给定的位置超出了原链表的长度，则将节点添加到尾部</span></div><div class="line">    <span class="keyword">elif</span> pos &gt; (self.length()<span class="number">-1</span>):</div><div class="line">        self.append(item)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        pre = self.__head</div><div class="line">        count = <span class="number">0</span></div><div class="line">        <span class="keyword">while</span> count &lt; (pos<span class="number">-1</span>):</div><div class="line">            count += <span class="number">1</span></div><div class="line">            pre = pre.next</div><div class="line">        <span class="comment"># 当循环退出后，pre指向pos-1位置</span></div><div class="line">        node = Node(item)</div><div class="line">        <span class="comment"># 先将新节点node的next指向插入位置的节点</span></div><div class="line">        node.next = pre.next</div><div class="line">        <span class="comment"># 将插入位置的前一个节点的next指向新节点</span></div><div class="line">        pre.next = node</div></pre></td></tr></table></figure>
<h4 id="删除节点"><a href="#删除节点" class="headerlink" title="删除节点"></a>删除节点</h4><p><img src="/img/链表/单链表删除节点.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">remove</span><span class="params">(self,item)</span>:</span></div><div class="line">    <span class="string">"""删除节点"""</span></div><div class="line">    cur = self._head</div><div class="line">    pre = <span class="keyword">None</span></div><div class="line">    <span class="keyword">while</span> cur != <span class="keyword">None</span>:</div><div class="line">        <span class="comment"># 找到了指定元素</span></div><div class="line">        <span class="keyword">if</span> cur.item == item:</div><div class="line">            <span class="comment"># 如果第一个就是删除的节点</span></div><div class="line">            <span class="keyword">if</span> <span class="keyword">not</span> pre:</div><div class="line">                <span class="comment"># 将头指针指向头节点的后一个节点</span></div><div class="line">                self._head = cur.next</div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                <span class="comment"># 将删除位置前一个节点的next指向删除位置的后一个节点</span></div><div class="line">                pre.next = cur.next</div><div class="line">            <span class="keyword">break</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="comment"># 继续按链表后移节点</span></div><div class="line">            pre = cur</div><div class="line">            cur = cur.next</div></pre></td></tr></table></figure>
<h4 id="查找节点是否存在"><a href="#查找节点是否存在" class="headerlink" title="查找节点是否存在"></a>查找节点是否存在</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">search</span><span class="params">(self,item)</span>:</span></div><div class="line">    <span class="string">"""链表查找节点是否存在，并返回True或者False"""</span></div><div class="line">    cur = self._head</div><div class="line">    <span class="keyword">while</span> cur != <span class="keyword">None</span>:</div><div class="line">        <span class="keyword">if</span> cur.item == item:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">        cur = cur.next</div><div class="line">    <span class="keyword">return</span> <span class="keyword">False</span></div></pre></td></tr></table></figure>
<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    ll = SingleLinkList()</div><div class="line">    ll.add(<span class="number">1</span>)</div><div class="line">    ll.add(<span class="number">2</span>)</div><div class="line">    ll.append(<span class="number">3</span>)</div><div class="line">    ll.insert(<span class="number">2</span>, <span class="number">4</span>)</div><div class="line">    <span class="keyword">print</span> <span class="string">"length:"</span>,ll.length()</div><div class="line">    ll.travel()</div><div class="line">    <span class="keyword">print</span> ll.search(<span class="number">3</span>)</div><div class="line">    <span class="keyword">print</span> ll.search(<span class="number">5</span>)</div><div class="line">    ll.remove(<span class="number">1</span>)</div><div class="line">    <span class="keyword">print</span> <span class="string">"length:"</span>,ll.length()</div><div class="line">    ll.travel()</div></pre></td></tr></table></figure>
<h2 id="双向链表"><a href="#双向链表" class="headerlink" title="双向链表"></a>双向链表</h2><p>一种更复杂的链表是“双向链表”或“双面链表”。每个节点有两个链接：一个指向前一个节点，当此节点为第一个节点时，指向空值；而另一个指向下一个节点，当此节点为最后一个节点时，指向空值。<br><img src="/img/链表/双向链表.png" alt=""></p>
<h3 id="节点的实现-1"><a href="#节点的实现-1" class="headerlink" title="节点的实现"></a>节点的实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, elem)</span>:</span></div><div class="line">        self.elem = elem</div><div class="line">        self.prev = <span class="keyword">None</span> <span class="comment">#指向前一个节点，如果此节点为第一个节点时，指向空值</span></div><div class="line">        self.next = <span class="keyword">None</span> <span class="comment">#指向后一个节点，如果此节点为最后一个节点时，指向空值</span></div></pre></td></tr></table></figure>
<h3 id="双向链表的实现"><a href="#双向链表的实现" class="headerlink" title="双向链表的实现"></a>双向链表的实现</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoubleLinkList</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, node=None)</span>:</span></div><div class="line">        self.__head = node</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_empty</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">"""如果链表为空，返回True;否则返回False"""</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">not</span> self.__head</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">length</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">"""返回链表的长度"""</span></div><div class="line">        <span class="keyword">if</span> self.is_empty():</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            count = <span class="number">0</span></div><div class="line">            cur = self.__head</div><div class="line"></div><div class="line">            <span class="keyword">while</span> cur <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</div><div class="line">                cur = cur.next</div><div class="line">                count += <span class="number">1</span></div><div class="line">            <span class="keyword">return</span> count</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(self, elem)</span>:</span></div><div class="line">        <span class="string">"""在头部添加一个节点"""</span></div><div class="line">        node = Node(elem)</div><div class="line"></div><div class="line">        <span class="keyword">if</span> self.is_empty():</div><div class="line">            self.__head = node</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            cur = self.__head</div><div class="line">            node.next = cur</div><div class="line">            cur.prev = node</div><div class="line">            self.__head = node</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">traversal</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">"""打印链表中的值"""</span></div><div class="line">        <span class="keyword">if</span> self.is_empty():</div><div class="line">            <span class="keyword">return</span></div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            cur = self.__head</div><div class="line"></div><div class="line">            <span class="keyword">while</span> cur <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</div><div class="line">                print(cur.elem, end=<span class="string">" "</span>)</div><div class="line">                cur = cur.next</div><div class="line">            print()</div><div class="line"></div><div class="line">     <span class="function"><span class="keyword">def</span> <span class="title">search</span><span class="params">(self,item)</span>:</span></div><div class="line">            <span class="string">"""链表查找节点是否存在，并返回True或者False"""</span></div><div class="line">            cur = self._head</div><div class="line">            <span class="keyword">while</span> cur != <span class="keyword">None</span>:</div><div class="line">                <span class="keyword">if</span> cur.item == item:</div><div class="line">                    <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">                cur = cur.next</div><div class="line">            <span class="keyword">return</span> <span class="keyword">False</span></div></pre></td></tr></table></figure>
<h3 id="指定位置插入节点"><a href="#指定位置插入节点" class="headerlink" title="指定位置插入节点"></a>指定位置插入节点</h3><p><img src="/img/链表/双向链表指定位置插入元素.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self, pos, elem)</span>:</span></div><div class="line">    <span class="string">"""在指定位置插入一个节点"""</span></div><div class="line">    <span class="comment"># 如果索引值&lt;=0，则添加到头部</span></div><div class="line">    <span class="keyword">if</span> pos &lt;= <span class="number">0</span>:</div><div class="line">        self.add(elem)</div><div class="line">    <span class="comment"># 如果索引值&gt;链表的长度，则添加到尾部</span></div><div class="line">    <span class="keyword">elif</span> pos &gt; self.length()<span class="number">-1</span>:</div><div class="line">        self.append(elem)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        node = Node(elem)</div><div class="line">        cur = self.__head</div><div class="line">        pre = <span class="keyword">None</span></div><div class="line">        count = <span class="number">0</span></div><div class="line"></div><div class="line">        <span class="keyword">while</span> count &lt; pos:</div><div class="line">            pre = cur</div><div class="line">            cur = cur.next</div><div class="line">            count += <span class="number">1</span></div><div class="line"></div><div class="line">        node.next = cur <span class="comment"># 将node的next指向cur</span></div><div class="line">        cur.prev = node <span class="comment"># 将cur的prev指向node</span></div><div class="line">        pre.next = node <span class="comment"># 将pre的next指向node</span></div><div class="line">        node.prev = pre <span class="comment"># 将node的prev指向pre</span></div></pre></td></tr></table></figure>
<h3 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h3><p><img src="/img/链表/双向链表删除节点.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">remove</span><span class="params">(self, elem)</span>:</span></div><div class="line">    <span class="string">"""删除一个节点"""</span></div><div class="line">    <span class="comment"># 如果链表为空，则直接退出</span></div><div class="line">    <span class="keyword">if</span> self.is_empty():</div><div class="line">        <span class="keyword">return</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        cur = self.__head</div><div class="line">        <span class="comment"># 如果为头节点</span></div><div class="line">        <span class="keyword">if</span> cur.elem == elem:</div><div class="line">            <span class="keyword">if</span> cur.next <span class="keyword">is</span> <span class="keyword">None</span>: <span class="comment"># 并且该链表只有一个节点</span></div><div class="line">                self.__head = <span class="keyword">None</span></div><div class="line">                <span class="keyword">return</span></div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                self.__head = cur.next <span class="comment"># self.__head指向cur的下一个节点</span></div><div class="line">                <span class="keyword">return</span></div><div class="line"></div><div class="line">        pre = <span class="keyword">None</span></div><div class="line">        <span class="keyword">while</span> cur.next <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</div><div class="line">            <span class="keyword">if</span> cur.elem == elem:</div><div class="line">                pre.next = cur.next</div><div class="line">                cur.next.prev = pre</div><div class="line">                <span class="keyword">return</span></div><div class="line">            <span class="keyword">else</span>:</div><div class="line">                pre = cur</div><div class="line">                cur = cur.next</div><div class="line">        <span class="comment"># 将最后一个节点的前一个节点的next指向None</span></div><div class="line">        <span class="keyword">if</span> cur.elem == elem:</div><div class="line">            pre.next = <span class="keyword">None</span></div></pre></td></tr></table></figure>
<h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    dll = DoubleLinkList()</div><div class="line">    dll.append(<span class="number">1</span>)</div><div class="line">    dll.append(<span class="number">2</span>)</div><div class="line">    dll.append(<span class="number">3</span>)</div><div class="line">    dll.append(<span class="number">4</span>)</div><div class="line">    dll.traversal()</div><div class="line">    dll.remove(<span class="number">1</span>)</div><div class="line">    dll.traversal()</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://xinhuahuang.github.io/2015/03/31/函数式编程之lambda、filter、map、reduce/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xinhua huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xinhua's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/31/函数式编程之lambda、filter、map、reduce/" itemprop="url">
                  函数式编程之lambda、filter、map、reduce
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-03-31T16:54:55+08:00">
                2015-03-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="匿名函数与lambda"><a href="#匿名函数与lambda" class="headerlink" title="匿名函数与lambda"></a>匿名函数与lambda</h2><p>python允许用lambda关键字来创建匿名函数。</p>
<p>lambda的语法： lambda [arg1[,arg2,…argN]]: expression</p>
<p>未使用lambda的函数代码如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x,y)</span>:</span></div><div class="line">     <span class="keyword">return</span> x+y</div></pre></td></tr></table></figure></p>
<p> 使用lambda函数的代码如下：<br> lambda x,y: x+y</p>
<p> lambda函数的参数也可以使用默认参数，如下：<br> <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">a = <span class="keyword">lambda</span> x,y=<span class="number">2</span> : x+y</div></pre></td></tr></table></figure></p>
<p> a(3)       =&gt;5，当只给一个参数时，y=2<br> a(3,5)      =&gt;8，当给出两个参数时，y=5</p>
<h2 id="filter"><a href="#filter" class="headerlink" title="filter()"></a>filter()</h2><p>filter()的语法：filter(func,seq)<br>意思：调用一个布尔函数func来迭代遍历每个seq中的元素，返回一个使用func返回值为true的元素的序列</p>
<p>如果用纯python来写filter()，它或许就像这样：</p>
 <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">filter</span><span class="params">(bool_func,seq)</span>:</span></div><div class="line">     filtered_seq = []</div><div class="line">     <span class="keyword">for</span> eachItem <span class="keyword">in</span> seq:</div><div class="line">          <span class="keyword">if</span> bool_func(eachItem):</div><div class="line">               filtered_seq.append(eachItem)</div><div class="line">     <span class="keyword">return</span> filtered_seq</div></pre></td></tr></table></figure>
<p><img src="/img/函数式编程/filter.jpg" alt=""></p>
<p>filter()示例<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">odd</span><span class="params">(n)</span>:</span></div><div class="line">  <span class="keyword">return</span> n%<span class="number">2</span></div><div class="line"></div><div class="line">allNums = []</div><div class="line"><span class="keyword">for</span> eachNum <span class="keyword">in</span> range(<span class="number">9</span>):</div><div class="line">  allNums.append(randint(<span class="number">1</span>,<span class="number">99</span>))</div><div class="line"><span class="keyword">print</span> filter(odd,allNums)</div></pre></td></tr></table></figure></p>
<p>第一次重构<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</div><div class="line"></div><div class="line">allNums = []</div><div class="line"><span class="keyword">for</span> eachNum <span class="keyword">in</span> range(<span class="number">9</span>):</div><div class="line">  allNums.append(randint(<span class="number">1</span>,<span class="number">99</span>))</div><div class="line"><span class="keyword">print</span> filter(<span class="keyword">lambda</span> n:n%<span class="number">2</span>,allNums)</div></pre></td></tr></table></figure></p>
<p>注： 在Python3中，如果直接打印 filter 将返回<filter object="" at="" 0x10207f28="">，可以用list()将 filter 转成列表后打印<br>示例：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(list(filter(<span class="keyword">lambda</span> n:n%<span class="number">2</span>,allNums)))</div></pre></td></tr></table></figure></filter></p>
<p>第二次重构<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</div><div class="line"></div><div class="line">allNums = []</div><div class="line"><span class="keyword">for</span> eachNum <span class="keyword">in</span> range(<span class="number">9</span>):</div><div class="line">  allNums.append(randint(<span class="number">1</span>,<span class="number">99</span>))</div><div class="line"><span class="keyword">print</span> [n <span class="keyword">for</span> n <span class="keyword">in</span> allNums <span class="keyword">if</span> n%<span class="number">2</span>]</div></pre></td></tr></table></figure></p>
<p>第三次重构<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</div><div class="line"></div><div class="line"><span class="keyword">print</span> [n <span class="keyword">for</span> n <span class="keyword">in</span> [randint(<span class="number">1</span>,<span class="number">99</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">9</span>)] <span class="keyword">if</span> n%<span class="number">2</span>]</div></pre></td></tr></table></figure></p>
<h2 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h2><p>map()的语法：map(func,seq1[,seq2…])<br>意思：将函数func作用于给定（s）的每个元素，并用一个列表来提供返回值；如果func为None，func表现为一个身份函数，返回一个含有每个序列中元素集合的n个元组的列表。</p>
<p>如果用纯python来写map()，它或许就像这样：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">map</span><span class="params">(func,seq)</span>:</span></div><div class="line">  mapped_seq = []</div><div class="line">  <span class="keyword">for</span> eachItem <span class="keyword">in</span> seq:</div><div class="line">       mapped_seq.append(func(eachItem))</div><div class="line">  <span class="keyword">return</span> mapped_seq</div></pre></td></tr></table></figure>
<p><img src="/img/函数式编程/map.jpg" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">map((<span class="keyword">lambda</span> x: x+<span class="number">2</span>),[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</div></pre></td></tr></table></figure>
<p>==&gt;[2,3,4,5,6,7]<br>注： 在Python3中，如果直接打印 map 将返回<map object="" at="" 0x10207f28="">，可以用list()将 map 转成列表后打印<br>示例：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(list(map(<span class="keyword">lambda</span> x: x+<span class="number">2</span>, [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])))</div></pre></td></tr></table></figure></map></p>
<p>map也可以被序列来替代<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[x+<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">6</span>)]</div></pre></td></tr></table></figure></p>
<p><img src="/img/函数式编程/map02.jpg" alt=""></p>
<p>map也可以和多个序列一起运作<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">map(<span class="keyword">lambda</span> x,y: x+y,[<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>],[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>])</div></pre></td></tr></table></figure></p>
<p>==&gt;[3,7,11]</p>
<p>当map的func为None时，就相当于将各序列每次各取一个值，组成一个元组<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">map(<span class="keyword">None</span>,[<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>],[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>])</div></pre></td></tr></table></figure></p>
<p>==&gt; [(1,2),(3,4),(5,6)]</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">zip([<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>],[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>])</div></pre></td></tr></table></figure>
<p>==&gt; [(1,2),(3,4),(5,6)]</p>
<h2 id="reduce"><a href="#reduce" class="headerlink" title="reduce()"></a>reduce()</h2><p>reduce()的语法：reduce(func,seq[,init])<br>意思：将二元函数作用于seq序列的元素，每次携带一对（先前的结果以及下一个序列元素），连续的将现有的结果和下一个值作用在获得的随后的结果上，最后减少我们的序列为一个单一的返回值；如果初始值init给定，第一个比较会是init和第一个序列元素而不是序列的头两个元素。</p>
<p>如果用纯python来写reduce()，它或许就像这样：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> init <span class="keyword">is</span> <span class="keyword">None</span>:</div><div class="line">  res = lseq.pop(<span class="number">0</span>)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">  res = init</div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> lseq:</div><div class="line">  res = bin_func(res,item)</div><div class="line"><span class="keyword">return</span> res</div></pre></td></tr></table></figure></p>
<p><img src="/img/函数式编程/reduce.jpg" alt=""><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> <span class="string">'the total is: '</span> , reduce((<span class="keyword">lambda</span> x,y:x+y),range(<span class="number">5</span>))</div></pre></td></tr></table></figure></p>
<p>==&gt; the total is: 10<br>注： 在Python3中，reduce已经移到了functools<br>示例：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> functors</div><div class="line">print(<span class="string">'the total is: '</span> , functools.reduce((<span class="keyword">lambda</span> x,y:x+y),range(<span class="number">5</span>)))</div></pre></td></tr></table></figure></p>
<h2 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h2><p>  <strong> lambda: </strong> 就相当于是一个没有名字的函数，使用场景为：函数的功能比较单一，且只使用一次，写方法名称调用又觉得太麻烦，经常与filter、map、reduce等函数合用<br>  <strong> filter: </strong>一个具有过滤功能的函数，通常是将一个序列中的值丢给一个func函数，且当func函数判断为真时，才将值写入到一个元组中，等循环遍历完整个序列后，会返回一                个经过过滤后的元组<br>  <strong> map: </strong> 和filter功能相似，唯一不同的是，map中的func函数是一个执行一系列操作的功能函数，当循环遍历完整个序列后，会返回一个经一系列操作过后的元组<br>  <strong> reduce: </strong>函数的写法和map、filter完全一样，但是调用方法却完全不相同。它是将一个序列的第一个和第二个值进行操作，并将操作后所得到的值再与第三个值进行操作，以此遍历整个序列，最终返回的是一个值（而不map、filter一样返回元组）</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://xinhuahuang.github.io/2015/03/31/理解深拷贝和浅拷贝/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xinhua huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xinhua's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/31/理解深拷贝和浅拷贝/" itemprop="url">
                  理解深拷贝和浅拷贝
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-03-31T11:24:38+08:00">
                2015-03-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="深拷贝和浅拷贝"><a href="#深拷贝和浅拷贝" class="headerlink" title="深拷贝和浅拷贝"></a>深拷贝和浅拷贝</h2><p><strong> 浅拷贝：</strong> 其实是新创建了一个类型跟原对象一样，内容是原对象的引用。新创建对象的值改变会影响到原对象的值</p>
<p>下面都是浅拷贝的操作：</p>
<ul>
<li>完全切片操作</li>
<li>利用工厂函数，比如：list()，dict()等</li>
<li>使用copy模块的copy()函数（当为可变类型时，第一层是深拷贝，后面是浅拷贝； 当为不可变类型时，都是浅拷贝）</li>
</ul>
<p>示例：<br><img src="img/拷贝/浅拷贝.jpg" alt=""></p>
<p><strong> 深拷贝: </strong> 将里面的内容拷贝一份到新的地址里面，新创建对象更改不会影响到原对象<br>import copy<br>copy.deepcopy()<br><img src="img/拷贝/02.jpg" alt=""></p>
<p>import copy<br>copy.copy()—当为可变类型时，第一层是深拷贝，后面是浅拷贝；<br><img src="img/拷贝/03深拷贝.jpg" alt=""></p>
<p>copy.copy()—当为不可变类型时，都是浅拷贝<br><img src="img/拷贝/04深拷贝.jpg" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="xinhua huang" />
          <p class="site-author-name" itemprop="name">xinhua huang</p>
           
              <p class="site-description motion-element" itemprop="description">人生苦短，我用Python</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/MyBookMark/index.html">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">xinhua huang</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

</body>
</html>
